{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=${IP_DATABASE},${DB_PORT};Initial Catalog=${DB_NAME_CORE};TrustServerCertificate=True;Persist Security Info=True;User ID=${DB_USER};Password=${DB_PASSWORD}",
    "BaseHumanResourceConnection": "Data Source=${IP_DATABASE},${DB_PORT};Initial Catalog=${DB_NAME_CORE};TrustServerCertificate=True;Persist Security Info=True;User ID=${DB_USER};Password=${DB_PASSWORD}",
    "BaseCoreConnection": "Data Source=${IP_DATABASE},${DB_PORT};Initial Catalog=${DB_NAME_CORE};TrustServerCertificate=True;Persist Security Info=True;User ID=${DB_USER};Password=${DB_PASSWORD}",
    "QueryConnection": "Data Source=${IP_DATABASE},${DB_PORT};Initial Catalog=${DB_NAME_CORE};TrustServerCertificate=True;Persist Security Info=True;User ID=${DB_USER};Password=${DB_PASSWORD}",
    "LogConnectionString": "Data Source=${IP_DATABASE},${DB_PORT};Initial Catalog=${DB_NAME_LOG};User Id=${DB_USER};Password=${DB_PASSWORD};MultipleActiveResultSets=true;Trusted_Connection=True;TrustServerCertificate=True;Integrated Security=False;Persist Security Info=False",
    "AuditLogConnectionString": "Data Source=${IP_DATABASE},${DB_PORT};Initial Catalog=${DB_NAME_AUDITLOG};TrustServerCertificate=True;Persist Security Info=True;User ID=${DB_USER};Password=${DB_PASSWORD}"
  },
  "QueryList": {
    "WFDesignTrack": "WITH WorkflowSteps\r\nAS (\r\n\tSELECT c.WFDesignStateID\r\n\t\t,c.WFDesignID\r\n\t\t,c.Created\r\n\t\t,c.ActionDate\r\n\t\t,C.ID\r\n\t\t,isnull(AEM.FirstName, '') + ' ' + isnull(AEM.LastName, '') AS AEMName\r\n\t\t,AEMPOS.NAME AS AEPos\r\n\t\t,ROW_NUMBER() OVER (\r\n\t\t\tORDER BY c.Created\r\n\t\t\t) AS StepNumber\r\n\tFROM WFCartable c\r\n\tLEFT JOIN OrgUnit AS AEMPOS ON c.ActionPositionID = AEMPOS.ID\r\n\tLEFT JOIN Employee AS AEM ON c.ActionEmployeeID = AEM.ID\r\n\tWHERE c.ItemID = @ItemID\r\n\t\tAND c.WFRegStatusCode = 1\r\n\t)\r\n\t,StepWithNext\r\nAS (\r\n\tSELECT ws.*\r\n\t\t,LEAD(ws.WFDesignStateID) OVER (\r\n\t\t\tORDER BY ws.Created\r\n\t\t\t) AS NextStateID\r\n\t\t,LEAD(ws.StepNumber) OVER (\r\n\t\t\tORDER BY ws.Created\r\n\t\t\t) AS NextStepNumber\r\n\tFROM WorkflowSteps ws\r\n\t)\r\nSELECT s.WFDesignStateID AS [StateID]\r\n\t,(\r\n\t\tSELECT TOP 1 r.ID\r\n\t\tFROM WFDesignStateRelation r\r\n\t\tWHERE r.WFDesignID = s.WFDesignID\r\n\t\t\tAND r.WFDesignStateID = s.WFDesignStateID\r\n\t\t\tAND r.WFDesignStateRelatedID = s.NextStateID\r\n\t\t) AS [RelationID]\r\n\t,s.NextStateID AS [NextStateID]\r\n\t,s.ActionDate\r\n\t,s.AEMName AS ActionEmployeeName\r\n\t,s.AEPos AS ActionEmployeePosition\r\nFROM StepWithNext s\r\nINNER JOIN WFDesignState ds ON s.WFDesignStateID = ds.ID\r\nWHERE s.NextStateID IS NOT NULL\r\nORDER BY s.StepNumber;\r\n"
  },
  "IdentityServer": {
    "Client": {
      "Authority": "",
      "ClientId": "b696f66b29663fbac2d4ea3432bff3ca",
      "ClientSecret": "secret_41423f640c7035672c38f734ea5399148353c72536e2e02ef7a1de1028f81e31",
      "Scope": "sepehr_admin"
    }
  },
  "AuditSettings": {
    "AuditableEntities": ["WFDesign"]
  },
  "Minio": {
    "BucketName": "microworkflow"
  },
  "Consul": {
    "ServiceRegistration": {
      "ID": "MicroWorkflow",
      "Address": "http://172.30.0.95",
      "Name": "MicroWorkflow",
      "Port": 80,
      "HTTPS": false,
      "Tags": ["micro_workflow"],
      "Checks": {
        "HealthHTTPAddress": "http://172.30.0.95:100/api/health/status"
      },
      "TaggedAddresses": {
        "GrpcDevelopment": {
          "Address": "https://localhost",
          "Port": 44395
        },
        "GrpcStage": {
          "Address": "http://172.30.0.95",
          "Port": 80
        },
        "GrpcProduction": {
          "Address": "http://172.30.0.95",
          "Port": 80
        },
        "HTTPDevelopment": {
          "Address": "https://localhost",
          "Port": 44395
        },
        "HTTPStage": {
          "Address": "http://172.30.0.95",
          "Port": 100
        },
        "HTTPProduction": {
          "Address": "http://172.30.0.95",
          "Port": 100
        }
      }
    }
  }
}
